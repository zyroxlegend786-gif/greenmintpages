<!DOCTYPE html>
<html>
<head>
<title>Green Pages IDE</title>
<style>
body{margin:0;display:flex;height:100vh;font-family:Arial;}
#editor{width:50%;padding:10px;}
#preview{width:50%;border:none;}
textarea{width:100%;height:80%;}
button{padding:10px;margin-top:10px;background:#16a34a;color:white;border:none;}
</style>
</head>
<body>

<div id="editor">
<h2>Green Pages IDE</h2>
<input id="sitename" placeholder="Site Name">
<textarea id="code"><h1>Hello Apex ðŸš€</h1></textarea>
<button onclick="preview()">Preview</button>
<button onclick="deploy()">Deploy</button>
<p id="msg"></p>
</div>

<iframe id="preview"></iframe>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore();

window.preview = function(){
  const code = document.getElementById("code").value;
  document.getElementById("preview").srcdoc = code;
}

window.deploy = async function(){
  const name = document.getElementById("sitename").value;
  const code = document.getElementById("code").value;

  if(!name) return alert("Enter site name");

  await setDoc(doc(db,"sites",name),{
    html: code,
    created: Date.now()
  });

  document.getElementById("msg").innerText =
  "Deployed at: greenpages.web.app/sites/"+name;
}
</script>

</body>
</html>
